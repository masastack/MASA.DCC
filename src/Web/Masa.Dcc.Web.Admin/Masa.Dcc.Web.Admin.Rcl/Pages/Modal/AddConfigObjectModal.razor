@inherits MasaCompontentBase

<SSheetDialog @key="@($"addConfigObjectModal-{Value}")" Value="Value" ValueChanged="SheetDialogValueChangedAsync" Title="@T("Create config object")" Icon="mdi-circle" IconColor="success">
    <MForm Class="full-height" Context="formContext" EnableValidation Model="_addConfigObjectModal.Data">
        <div class="d-flex flex-column" style="width:100%; height:100%; padding: 48px 228px; overflow: hidden;">
            <div class="full-height" style="overflow: auto;">
                <div class="emphasis--text h6 d-flex align-center">
                    @AppDetail.Name
                    <span class="ml-3 regular3--text btn">|</span>
                    <sapn class="ml-2 regular3--text btn">@AppDetail.Identity</sapn>
                </div>
                <STextField Class="mt-12" Dense Label="@T("Name")" Outlined Prefix="@(ConfigObjectType==ConfigObjectType.Public ? _namePrefix : "")" @bind-Value="_addConfigObjectModal.Data.Name"></STextField>
                <SSelect @bind-Value="_addConfigObjectModal.Data.FormatLabelCode"
                         Class="pt-6"
                         Label="格式"
                         MenuProps="props => props.OffsetY = true"
                         Outlined
                         Dense
                         Items="_configObjectFormats"
                         ItemText="l=>l.Name"
                         ItemValue="l=>l.Code">
                </SSelect>
                <p class="neutral--text pt-6" style="font-size:14px; font-weight:700;">选择集群</p>
                <MChipGroup Multiple Column Values="_selectEnvClusterIds" ValuesChanged="EnvClusterValueChanged">
                    @foreach (var item in AppDetail.EnvironmentClusters)
                    {
                        <MChip Value="item.Id" Large Class="envClusterChip mr-6 mb-6" Filter Outlined ActiveClass="@($"{item.EnvironmentColor}")">
                            <div style="@($"color: {item.EnvironmentColor} !important")">@item.EnvironmentName</div>&nbsp;&nbsp;
                            <div style="color:#05CD99">@item.ClusterName</div>
                        </MChip>
                    }
                </MChipGroup>
            </div>
            <div class="d-flex justify-end align-end" style="width:100%;">
                <SButton Small OnClick="()=>AddConfigObject(formContext)">@T("Submit")</SButton>
            </div>
        </div>
    </MForm>
</SSheetDialog>
